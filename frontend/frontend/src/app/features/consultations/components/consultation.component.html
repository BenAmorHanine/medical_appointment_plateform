<div class="consultations-page">
  <section class="consultations-hero">
    <div class="hero-overlay">
      <div class="container">
        <div class="d-flex justify-content-between align-items-center flex-wrap gap-3">
          <h1 class="page-title">
            <span class="gradient-text">Patient</span> Consultations
          </h1>
          <button class="btn btn-back" (click)="facade.error.set(null); facade.reset()">
            <i class="fa fa-arrow-left me-2"></i>Back to Appointments
          </button>
        </div>
      </div>
    </div>
  </section>

  <div class="container">
    <div class="row">
      <div class="col-12">
        <app-consultation-history [consultations]="facade.patientConsultations()" />

        <app-consultation-form [form]="formService.form()" [loading]="facade.loading()" [error]="facade.error()"
          [isSubmitDisabled]="isSubmitDisabled()" (formSubmit)="onSubmit()" (formReset)="formService.reset()" />

        @if (facade.currentConsultation() && facade.appointmentState()?.id ===
        facade.currentConsultation()?.appointmentId) {
        <app-consultation-success [consultation]="facade.currentConsultation()" />
        }
      </div>
    </div>
  </div>
</div>